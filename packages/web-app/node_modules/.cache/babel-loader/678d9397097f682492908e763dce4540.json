{"ast":null,"code":"import _pt from \"prop-types\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nfunction _objectWithoutPropertiesLoose(source, excluded) {\n  if (source == null) return {};\n  var target = {};\n  var sourceKeys = Object.keys(source);\n  var key, i;\n\n  for (i = 0; i < sourceKeys.length; i++) {\n    key = sourceKeys[i];\n    if (excluded.indexOf(key) >= 0) continue;\n    target[key] = source[key];\n  }\n\n  return target;\n}\n\nimport React, { useCallback, useContext, useEffect, useRef } from 'react';\nimport { useTooltipInPortal, defaultStyles } from '@visx/tooltip';\nimport TooltipContext from '../context/TooltipContext';\nimport DataContext from '../context/DataContext';\nimport getScaleBandwidth from '../utils/getScaleBandwidth';\nimport isValidNumber from '../typeguards/isValidNumber';\n/** fontSize + lineHeight from default styles break precise location of crosshair, etc. */\n\nvar TOOLTIP_NO_STYLE = {\n  position: 'absolute',\n  pointerEvents: 'none',\n  fontSize: 0,\n  lineHeight: 0\n};\nvar INVISIBLE_STYLES = {\n  position: 'absolute',\n  left: 0,\n  top: 0,\n  opacity: 0,\n  width: 0,\n  height: 0,\n  pointerEvents: 'none'\n};\nexport default function Tooltip(_ref) {\n  var _tooltipContext$toolt, _nearestDatum$key, _ref11, _theme$gridStyles$str, _theme$gridStyles2, _theme$htmlLabel3, _ref12, _theme$gridStyles$str2, _theme$gridStyles3, _theme$htmlLabel4, _theme$backgroundColo, _theme$htmlLabel5, _theme$htmlLabel6;\n\n  var debounce = _ref.debounce,\n      detectBounds = _ref.detectBounds,\n      horizontalCrosshairStyle = _ref.horizontalCrosshairStyle,\n      glyphStyle = _ref.glyphStyle,\n      renderTooltip = _ref.renderTooltip,\n      resizeObserverPolyfill = _ref.resizeObserverPolyfill,\n      _ref$scroll = _ref.scroll,\n      scroll = _ref$scroll === void 0 ? true : _ref$scroll,\n      _ref$showDatumGlyph = _ref.showDatumGlyph,\n      showDatumGlyph = _ref$showDatumGlyph === void 0 ? false : _ref$showDatumGlyph,\n      _ref$showHorizontalCr = _ref.showHorizontalCrosshair,\n      showHorizontalCrosshair = _ref$showHorizontalCr === void 0 ? false : _ref$showHorizontalCr,\n      _ref$showSeriesGlyphs = _ref.showSeriesGlyphs,\n      showSeriesGlyphs = _ref$showSeriesGlyphs === void 0 ? false : _ref$showSeriesGlyphs,\n      _ref$showVerticalCros = _ref.showVerticalCrosshair,\n      showVerticalCrosshair = _ref$showVerticalCros === void 0 ? false : _ref$showVerticalCros,\n      _ref$snapTooltipToDat = _ref.snapTooltipToDatumX,\n      snapTooltipToDatumX = _ref$snapTooltipToDat === void 0 ? false : _ref$snapTooltipToDat,\n      _ref$snapTooltipToDat2 = _ref.snapTooltipToDatumY,\n      snapTooltipToDatumY = _ref$snapTooltipToDat2 === void 0 ? false : _ref$snapTooltipToDat2,\n      verticalCrosshairStyle = _ref.verticalCrosshairStyle,\n      tooltipProps = _objectWithoutPropertiesLoose(_ref, [\"debounce\", \"detectBounds\", \"horizontalCrosshairStyle\", \"glyphStyle\", \"renderTooltip\", \"resizeObserverPolyfill\", \"scroll\", \"showDatumGlyph\", \"showHorizontalCrosshair\", \"showSeriesGlyphs\", \"showVerticalCrosshair\", \"snapTooltipToDatumX\", \"snapTooltipToDatumY\", \"verticalCrosshairStyle\"]);\n\n  var _ref2 = useContext(DataContext) || {},\n      colorScale = _ref2.colorScale,\n      theme = _ref2.theme,\n      innerHeight = _ref2.innerHeight,\n      innerWidth = _ref2.innerWidth,\n      margin = _ref2.margin,\n      xScale = _ref2.xScale,\n      yScale = _ref2.yScale,\n      dataRegistry = _ref2.dataRegistry;\n\n  var tooltipContext = useContext(TooltipContext);\n\n  var _useTooltipInPortal = useTooltipInPortal({\n    debounce: debounce,\n    detectBounds: detectBounds,\n    polyfill: resizeObserverPolyfill,\n    scroll: scroll\n  }),\n      containerRef = _useTooltipInPortal.containerRef,\n      TooltipInPortal = _useTooltipInPortal.TooltipInPortal,\n      forceRefreshBounds = _useTooltipInPortal.forceRefreshBounds; // To correctly position itself in a Portal, the tooltip must know its container bounds\n  // this is done by rendering an invisible node whose ref can be used to find its parentElement\n\n\n  var setContainerRef = useCallback(function (ownRef) {\n    var _ownRef$parentElement;\n\n    containerRef((_ownRef$parentElement = ownRef == null ? void 0 : ownRef.parentElement) != null ? _ownRef$parentElement : null);\n  }, [containerRef]);\n  var tooltipContent = (tooltipContext == null ? void 0 : tooltipContext.tooltipOpen) ? renderTooltip(_extends({}, tooltipContext, {\n    colorScale: colorScale\n  })) : null;\n  var showTooltip = (tooltipContext == null ? void 0 : tooltipContext.tooltipOpen) && tooltipContent != null; // useTooltipInPortal is powered by react-use-measure and will update portal positions upon\n  // resize and page scroll. however it **cannot** detect when a chart container moves on a\n  // page due to animation or drag-and-drop, etc.\n  // therefore we force refresh the bounds any time we transition from a hidden tooltip to\n  // one that is visible.\n\n  var lastShowTooltip = useRef(false);\n  useEffect(function () {\n    if (showTooltip && !lastShowTooltip.current) {\n      forceRefreshBounds();\n    }\n\n    lastShowTooltip.current = showTooltip;\n  }, [showTooltip, forceRefreshBounds]);\n  var tooltipLeft = tooltipContext == null ? void 0 : tooltipContext.tooltipLeft;\n  var tooltipTop = tooltipContext == null ? void 0 : tooltipContext.tooltipTop;\n  var xScaleBandwidth = xScale ? getScaleBandwidth(xScale) : 0;\n  var yScaleBandwidth = yScale ? getScaleBandwidth(yScale) : 0;\n  var getDatumLeftTop = useCallback(function (key, datum) {\n    var _ref3, _ref4;\n\n    var entry = dataRegistry == null ? void 0 : dataRegistry.get(key);\n    var xAccessor = entry == null ? void 0 : entry.xAccessor;\n    var yAccessor = entry == null ? void 0 : entry.yAccessor;\n    var left = xScale && xAccessor ? (_ref3 = Number(xScale(xAccessor(datum))) + xScaleBandwidth / 2) != null ? _ref3 : 0 : undefined;\n    var top = yScale && yAccessor ? (_ref4 = Number(yScale(yAccessor(datum))) + yScaleBandwidth / 2) != null ? _ref4 : 0 : undefined;\n    return {\n      left: left,\n      top: top\n    };\n  }, [dataRegistry, xScaleBandwidth, yScaleBandwidth, xScale, yScale]);\n  var nearestDatum = tooltipContext == null ? void 0 : (_tooltipContext$toolt = tooltipContext.tooltipData) == null ? void 0 : _tooltipContext$toolt.nearestDatum;\n  var nearestDatumKey = (_nearestDatum$key = nearestDatum == null ? void 0 : nearestDatum.key) != null ? _nearestDatum$key : ''; // snap x- or y-coord to the actual data point (not event coordinates)\n\n  if (showTooltip && nearestDatum && (snapTooltipToDatumX || snapTooltipToDatumY)) {\n    var _getDatumLeftTop = getDatumLeftTop(nearestDatumKey, nearestDatum.datum),\n        left = _getDatumLeftTop.left,\n        top = _getDatumLeftTop.top;\n\n    tooltipLeft = snapTooltipToDatumX && isValidNumber(left) ? left : tooltipLeft;\n    tooltipTop = snapTooltipToDatumY && isValidNumber(top) ? top : tooltipTop;\n  } // collect positions + styles for glyphs; glyphs always snap to Datum, not event coords\n\n\n  var glyphProps = [];\n\n  if (showTooltip && (showDatumGlyph || showSeriesGlyphs)) {\n    var _glyphStyle$radius, _glyphStyle$strokeWid;\n\n    var radius = Number((_glyphStyle$radius = glyphStyle == null ? void 0 : glyphStyle.radius) != null ? _glyphStyle$radius : 4);\n    var strokeWidth = Number((_glyphStyle$strokeWid = glyphStyle == null ? void 0 : glyphStyle.strokeWidth) != null ? _glyphStyle$strokeWid : 1.5);\n\n    if (showSeriesGlyphs) {\n      var _tooltipContext$toolt2, _tooltipContext$toolt3;\n\n      Object.values((_tooltipContext$toolt2 = tooltipContext == null ? void 0 : (_tooltipContext$toolt3 = tooltipContext.tooltipData) == null ? void 0 : _tooltipContext$toolt3.datumByKey) != null ? _tooltipContext$toolt2 : {}).forEach(function (_ref5) {\n        var _ref6, _colorScale, _theme$htmlLabel;\n\n        var key = _ref5.key,\n            datum = _ref5.datum;\n        var color = (_ref6 = (_colorScale = colorScale == null ? void 0 : colorScale(key)) != null ? _colorScale : theme == null ? void 0 : (_theme$htmlLabel = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel.color) != null ? _ref6 : '#222';\n\n        var _getDatumLeftTop2 = getDatumLeftTop(key, datum),\n            left = _getDatumLeftTop2.left,\n            top = _getDatumLeftTop2.top; // don't show glyphs if coords are unavailable\n\n\n        if (!isValidNumber(left) || !isValidNumber(top)) return;\n        glyphProps.push({\n          left: left - radius - strokeWidth,\n          top: top - radius - strokeWidth,\n          fill: color,\n          stroke: theme == null ? void 0 : theme.backgroundColor,\n          strokeWidth: strokeWidth,\n          radius: radius\n        });\n      });\n    } else if (nearestDatum) {\n      var _ref7, _ref8, _ref9, _ref10, _theme$gridStyles, _theme$htmlLabel2;\n\n      var _getDatumLeftTop3 = getDatumLeftTop(nearestDatumKey, nearestDatum.datum),\n          _left = _getDatumLeftTop3.left,\n          _top = _getDatumLeftTop3.top;\n\n      glyphProps.push({\n        left: (_left != null ? _left : 0) - radius - strokeWidth,\n        top: (_top != null ? _top : 0) - radius - strokeWidth,\n        fill: (_ref7 = (_ref8 = (_ref9 = (_ref10 = nearestDatumKey && (colorScale == null ? void 0 : colorScale(nearestDatumKey))) != null ? _ref10 : null) != null ? _ref9 : theme == null ? void 0 : (_theme$gridStyles = theme.gridStyles) == null ? void 0 : _theme$gridStyles.stroke) != null ? _ref8 : theme == null ? void 0 : (_theme$htmlLabel2 = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel2.color) != null ? _ref7 : '#222',\n        radius: radius,\n        strokeWidth: strokeWidth\n      });\n    }\n  }\n\n  return (\n    /*#__PURE__*/\n    // Tooltip can be rendered as a child of SVG or HTML since its output is rendered in a Portal.\n    // So use svg element to find container ref because it's a valid child of SVG and HTML parents.\n    React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"svg\", {\n      ref: setContainerRef,\n      style: INVISIBLE_STYLES\n    }), showTooltip && /*#__PURE__*/React.createElement(React.Fragment, null, showVerticalCrosshair && /*#__PURE__*/React.createElement(TooltipInPortal, {\n      className: \"visx-crosshair visx-crosshair-vertical\",\n      left: tooltipLeft,\n      top: margin == null ? void 0 : margin.top,\n      offsetLeft: 0,\n      offsetTop: 0,\n      detectBounds: false,\n      style: TOOLTIP_NO_STYLE\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      width: \"1\",\n      height: innerHeight,\n      overflow: \"visible\"\n    }, /*#__PURE__*/React.createElement(\"line\", _extends({\n      x1: 0,\n      x2: 0,\n      y1: 0,\n      y2: innerHeight,\n      strokeWidth: 1.5,\n      stroke: (_ref11 = (_theme$gridStyles$str = theme == null ? void 0 : (_theme$gridStyles2 = theme.gridStyles) == null ? void 0 : _theme$gridStyles2.stroke) != null ? _theme$gridStyles$str : theme == null ? void 0 : (_theme$htmlLabel3 = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel3.color) != null ? _ref11 : '#222'\n    }, verticalCrosshairStyle)))), showHorizontalCrosshair && /*#__PURE__*/React.createElement(TooltipInPortal, {\n      className: \"visx-crosshair visx-crosshair-horizontal\",\n      left: margin == null ? void 0 : margin.left,\n      top: tooltipTop,\n      offsetLeft: 0,\n      offsetTop: 0,\n      detectBounds: false,\n      style: TOOLTIP_NO_STYLE\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      width: innerWidth,\n      height: \"1\",\n      overflow: \"visible\"\n    }, /*#__PURE__*/React.createElement(\"line\", _extends({\n      x1: 0,\n      x2: innerWidth,\n      y1: 0,\n      y2: 0,\n      strokeWidth: 1.5,\n      stroke: (_ref12 = (_theme$gridStyles$str2 = theme == null ? void 0 : (_theme$gridStyles3 = theme.gridStyles) == null ? void 0 : _theme$gridStyles3.stroke) != null ? _theme$gridStyles$str2 : theme == null ? void 0 : (_theme$htmlLabel4 = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel4.color) != null ? _ref12 : '#222'\n    }, horizontalCrosshairStyle)))), glyphProps.map(function (_ref13, i) {\n      var left = _ref13.left,\n          top = _ref13.top,\n          fill = _ref13.fill,\n          stroke = _ref13.stroke,\n          strokeWidth = _ref13.strokeWidth,\n          radius = _ref13.radius;\n      return top == null || left == null ? null : /*#__PURE__*/React.createElement(TooltipInPortal, {\n        key: i,\n        className: \"visx-tooltip-glyph\",\n        left: left,\n        top: top,\n        offsetLeft: 0,\n        offsetTop: 0,\n        detectBounds: false,\n        style: TOOLTIP_NO_STYLE\n      }, /*#__PURE__*/React.createElement(\"svg\", {\n        width: (radius + strokeWidth) * 2,\n        height: (radius + strokeWidth) * 2\n      }, /*#__PURE__*/React.createElement(\"circle\", _extends({\n        cx: radius + strokeWidth,\n        cy: radius + strokeWidth,\n        r: radius,\n        fill: fill,\n        stroke: stroke,\n        strokeWidth: strokeWidth,\n        paintOrder: \"fill\"\n      }, glyphStyle))));\n    }), /*#__PURE__*/React.createElement(TooltipInPortal, _extends({\n      left: tooltipLeft,\n      top: tooltipTop,\n      style: _extends({}, defaultStyles, {\n        background: (_theme$backgroundColo = theme == null ? void 0 : theme.backgroundColor) != null ? _theme$backgroundColo : 'white',\n        boxShadow: \"0 1px 2px \" + ((theme == null ? void 0 : (_theme$htmlLabel5 = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel5.color) ? (theme == null ? void 0 : (_theme$htmlLabel6 = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel6.color) + \"55\" : '#22222255')\n      }, theme == null ? void 0 : theme.htmlLabel)\n    }, tooltipProps), tooltipContent)))\n  );\n}\nTooltip.propTypes = {\n  renderTooltip: _pt.func.isRequired,\n  snapTooltipToDatumX: _pt.bool,\n  snapTooltipToDatumY: _pt.bool,\n  showVerticalCrosshair: _pt.bool,\n  showHorizontalCrosshair: _pt.bool,\n  showDatumGlyph: _pt.bool,\n  showSeriesGlyphs: _pt.bool\n};","map":{"version":3,"sources":["/Users/federico/git/test/impc-mousephenotype-web/node_modules/@visx/xychart/esm/components/Tooltip.js"],"names":["_pt","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","_objectWithoutPropertiesLoose","excluded","sourceKeys","keys","indexOf","React","useCallback","useContext","useEffect","useRef","useTooltipInPortal","defaultStyles","TooltipContext","DataContext","getScaleBandwidth","isValidNumber","TOOLTIP_NO_STYLE","position","pointerEvents","fontSize","lineHeight","INVISIBLE_STYLES","left","top","opacity","width","height","Tooltip","_ref","_tooltipContext$toolt","_nearestDatum$key","_ref11","_theme$gridStyles$str","_theme$gridStyles2","_theme$htmlLabel3","_ref12","_theme$gridStyles$str2","_theme$gridStyles3","_theme$htmlLabel4","_theme$backgroundColo","_theme$htmlLabel5","_theme$htmlLabel6","debounce","detectBounds","horizontalCrosshairStyle","glyphStyle","renderTooltip","resizeObserverPolyfill","_ref$scroll","scroll","_ref$showDatumGlyph","showDatumGlyph","_ref$showHorizontalCr","showHorizontalCrosshair","_ref$showSeriesGlyphs","showSeriesGlyphs","_ref$showVerticalCros","showVerticalCrosshair","_ref$snapTooltipToDat","snapTooltipToDatumX","_ref$snapTooltipToDat2","snapTooltipToDatumY","verticalCrosshairStyle","tooltipProps","_ref2","colorScale","theme","innerHeight","innerWidth","margin","xScale","yScale","dataRegistry","tooltipContext","_useTooltipInPortal","polyfill","containerRef","TooltipInPortal","forceRefreshBounds","setContainerRef","ownRef","_ownRef$parentElement","parentElement","tooltipContent","tooltipOpen","showTooltip","lastShowTooltip","current","tooltipLeft","tooltipTop","xScaleBandwidth","yScaleBandwidth","getDatumLeftTop","datum","_ref3","_ref4","entry","get","xAccessor","yAccessor","Number","undefined","nearestDatum","tooltipData","nearestDatumKey","_getDatumLeftTop","glyphProps","_glyphStyle$radius","_glyphStyle$strokeWid","radius","strokeWidth","_tooltipContext$toolt2","_tooltipContext$toolt3","values","datumByKey","forEach","_ref5","_ref6","_colorScale","_theme$htmlLabel","color","htmlLabel","_getDatumLeftTop2","push","fill","stroke","backgroundColor","_ref7","_ref8","_ref9","_ref10","_theme$gridStyles","_theme$htmlLabel2","_getDatumLeftTop3","_left","_top","gridStyles","createElement","Fragment","ref","style","className","offsetLeft","offsetTop","overflow","x1","x2","y1","y2","map","_ref13","cx","cy","r","paintOrder","background","boxShadow","propTypes","func","isRequired","bool"],"mappings":"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","sourcesContent":["import _pt from \"prop-types\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nfunction _objectWithoutPropertiesLoose(source, excluded) { if (source == null) return {}; var target = {}; var sourceKeys = Object.keys(source); var key, i; for (i = 0; i < sourceKeys.length; i++) { key = sourceKeys[i]; if (excluded.indexOf(key) >= 0) continue; target[key] = source[key]; } return target; }\n\nimport React, { useCallback, useContext, useEffect, useRef } from 'react';\nimport { useTooltipInPortal, defaultStyles } from '@visx/tooltip';\nimport TooltipContext from '../context/TooltipContext';\nimport DataContext from '../context/DataContext';\nimport getScaleBandwidth from '../utils/getScaleBandwidth';\nimport isValidNumber from '../typeguards/isValidNumber';\n/** fontSize + lineHeight from default styles break precise location of crosshair, etc. */\n\nvar TOOLTIP_NO_STYLE = {\n  position: 'absolute',\n  pointerEvents: 'none',\n  fontSize: 0,\n  lineHeight: 0\n};\nvar INVISIBLE_STYLES = {\n  position: 'absolute',\n  left: 0,\n  top: 0,\n  opacity: 0,\n  width: 0,\n  height: 0,\n  pointerEvents: 'none'\n};\nexport default function Tooltip(_ref) {\n  var _tooltipContext$toolt, _nearestDatum$key, _ref11, _theme$gridStyles$str, _theme$gridStyles2, _theme$htmlLabel3, _ref12, _theme$gridStyles$str2, _theme$gridStyles3, _theme$htmlLabel4, _theme$backgroundColo, _theme$htmlLabel5, _theme$htmlLabel6;\n\n  var debounce = _ref.debounce,\n      detectBounds = _ref.detectBounds,\n      horizontalCrosshairStyle = _ref.horizontalCrosshairStyle,\n      glyphStyle = _ref.glyphStyle,\n      renderTooltip = _ref.renderTooltip,\n      resizeObserverPolyfill = _ref.resizeObserverPolyfill,\n      _ref$scroll = _ref.scroll,\n      scroll = _ref$scroll === void 0 ? true : _ref$scroll,\n      _ref$showDatumGlyph = _ref.showDatumGlyph,\n      showDatumGlyph = _ref$showDatumGlyph === void 0 ? false : _ref$showDatumGlyph,\n      _ref$showHorizontalCr = _ref.showHorizontalCrosshair,\n      showHorizontalCrosshair = _ref$showHorizontalCr === void 0 ? false : _ref$showHorizontalCr,\n      _ref$showSeriesGlyphs = _ref.showSeriesGlyphs,\n      showSeriesGlyphs = _ref$showSeriesGlyphs === void 0 ? false : _ref$showSeriesGlyphs,\n      _ref$showVerticalCros = _ref.showVerticalCrosshair,\n      showVerticalCrosshair = _ref$showVerticalCros === void 0 ? false : _ref$showVerticalCros,\n      _ref$snapTooltipToDat = _ref.snapTooltipToDatumX,\n      snapTooltipToDatumX = _ref$snapTooltipToDat === void 0 ? false : _ref$snapTooltipToDat,\n      _ref$snapTooltipToDat2 = _ref.snapTooltipToDatumY,\n      snapTooltipToDatumY = _ref$snapTooltipToDat2 === void 0 ? false : _ref$snapTooltipToDat2,\n      verticalCrosshairStyle = _ref.verticalCrosshairStyle,\n      tooltipProps = _objectWithoutPropertiesLoose(_ref, [\"debounce\", \"detectBounds\", \"horizontalCrosshairStyle\", \"glyphStyle\", \"renderTooltip\", \"resizeObserverPolyfill\", \"scroll\", \"showDatumGlyph\", \"showHorizontalCrosshair\", \"showSeriesGlyphs\", \"showVerticalCrosshair\", \"snapTooltipToDatumX\", \"snapTooltipToDatumY\", \"verticalCrosshairStyle\"]);\n\n  var _ref2 = useContext(DataContext) || {},\n      colorScale = _ref2.colorScale,\n      theme = _ref2.theme,\n      innerHeight = _ref2.innerHeight,\n      innerWidth = _ref2.innerWidth,\n      margin = _ref2.margin,\n      xScale = _ref2.xScale,\n      yScale = _ref2.yScale,\n      dataRegistry = _ref2.dataRegistry;\n\n  var tooltipContext = useContext(TooltipContext);\n\n  var _useTooltipInPortal = useTooltipInPortal({\n    debounce: debounce,\n    detectBounds: detectBounds,\n    polyfill: resizeObserverPolyfill,\n    scroll: scroll\n  }),\n      containerRef = _useTooltipInPortal.containerRef,\n      TooltipInPortal = _useTooltipInPortal.TooltipInPortal,\n      forceRefreshBounds = _useTooltipInPortal.forceRefreshBounds; // To correctly position itself in a Portal, the tooltip must know its container bounds\n  // this is done by rendering an invisible node whose ref can be used to find its parentElement\n\n\n  var setContainerRef = useCallback(function (ownRef) {\n    var _ownRef$parentElement;\n\n    containerRef((_ownRef$parentElement = ownRef == null ? void 0 : ownRef.parentElement) != null ? _ownRef$parentElement : null);\n  }, [containerRef]);\n  var tooltipContent = (tooltipContext == null ? void 0 : tooltipContext.tooltipOpen) ? renderTooltip(_extends({}, tooltipContext, {\n    colorScale: colorScale\n  })) : null;\n  var showTooltip = (tooltipContext == null ? void 0 : tooltipContext.tooltipOpen) && tooltipContent != null; // useTooltipInPortal is powered by react-use-measure and will update portal positions upon\n  // resize and page scroll. however it **cannot** detect when a chart container moves on a\n  // page due to animation or drag-and-drop, etc.\n  // therefore we force refresh the bounds any time we transition from a hidden tooltip to\n  // one that is visible.\n\n  var lastShowTooltip = useRef(false);\n  useEffect(function () {\n    if (showTooltip && !lastShowTooltip.current) {\n      forceRefreshBounds();\n    }\n\n    lastShowTooltip.current = showTooltip;\n  }, [showTooltip, forceRefreshBounds]);\n  var tooltipLeft = tooltipContext == null ? void 0 : tooltipContext.tooltipLeft;\n  var tooltipTop = tooltipContext == null ? void 0 : tooltipContext.tooltipTop;\n  var xScaleBandwidth = xScale ? getScaleBandwidth(xScale) : 0;\n  var yScaleBandwidth = yScale ? getScaleBandwidth(yScale) : 0;\n  var getDatumLeftTop = useCallback(function (key, datum) {\n    var _ref3, _ref4;\n\n    var entry = dataRegistry == null ? void 0 : dataRegistry.get(key);\n    var xAccessor = entry == null ? void 0 : entry.xAccessor;\n    var yAccessor = entry == null ? void 0 : entry.yAccessor;\n    var left = xScale && xAccessor ? (_ref3 = Number(xScale(xAccessor(datum))) + xScaleBandwidth / 2) != null ? _ref3 : 0 : undefined;\n    var top = yScale && yAccessor ? (_ref4 = Number(yScale(yAccessor(datum))) + yScaleBandwidth / 2) != null ? _ref4 : 0 : undefined;\n    return {\n      left: left,\n      top: top\n    };\n  }, [dataRegistry, xScaleBandwidth, yScaleBandwidth, xScale, yScale]);\n  var nearestDatum = tooltipContext == null ? void 0 : (_tooltipContext$toolt = tooltipContext.tooltipData) == null ? void 0 : _tooltipContext$toolt.nearestDatum;\n  var nearestDatumKey = (_nearestDatum$key = nearestDatum == null ? void 0 : nearestDatum.key) != null ? _nearestDatum$key : ''; // snap x- or y-coord to the actual data point (not event coordinates)\n\n  if (showTooltip && nearestDatum && (snapTooltipToDatumX || snapTooltipToDatumY)) {\n    var _getDatumLeftTop = getDatumLeftTop(nearestDatumKey, nearestDatum.datum),\n        left = _getDatumLeftTop.left,\n        top = _getDatumLeftTop.top;\n\n    tooltipLeft = snapTooltipToDatumX && isValidNumber(left) ? left : tooltipLeft;\n    tooltipTop = snapTooltipToDatumY && isValidNumber(top) ? top : tooltipTop;\n  } // collect positions + styles for glyphs; glyphs always snap to Datum, not event coords\n\n\n  var glyphProps = [];\n\n  if (showTooltip && (showDatumGlyph || showSeriesGlyphs)) {\n    var _glyphStyle$radius, _glyphStyle$strokeWid;\n\n    var radius = Number((_glyphStyle$radius = glyphStyle == null ? void 0 : glyphStyle.radius) != null ? _glyphStyle$radius : 4);\n    var strokeWidth = Number((_glyphStyle$strokeWid = glyphStyle == null ? void 0 : glyphStyle.strokeWidth) != null ? _glyphStyle$strokeWid : 1.5);\n\n    if (showSeriesGlyphs) {\n      var _tooltipContext$toolt2, _tooltipContext$toolt3;\n\n      Object.values((_tooltipContext$toolt2 = tooltipContext == null ? void 0 : (_tooltipContext$toolt3 = tooltipContext.tooltipData) == null ? void 0 : _tooltipContext$toolt3.datumByKey) != null ? _tooltipContext$toolt2 : {}).forEach(function (_ref5) {\n        var _ref6, _colorScale, _theme$htmlLabel;\n\n        var key = _ref5.key,\n            datum = _ref5.datum;\n        var color = (_ref6 = (_colorScale = colorScale == null ? void 0 : colorScale(key)) != null ? _colorScale : theme == null ? void 0 : (_theme$htmlLabel = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel.color) != null ? _ref6 : '#222';\n\n        var _getDatumLeftTop2 = getDatumLeftTop(key, datum),\n            left = _getDatumLeftTop2.left,\n            top = _getDatumLeftTop2.top; // don't show glyphs if coords are unavailable\n\n\n        if (!isValidNumber(left) || !isValidNumber(top)) return;\n        glyphProps.push({\n          left: left - radius - strokeWidth,\n          top: top - radius - strokeWidth,\n          fill: color,\n          stroke: theme == null ? void 0 : theme.backgroundColor,\n          strokeWidth: strokeWidth,\n          radius: radius\n        });\n      });\n    } else if (nearestDatum) {\n      var _ref7, _ref8, _ref9, _ref10, _theme$gridStyles, _theme$htmlLabel2;\n\n      var _getDatumLeftTop3 = getDatumLeftTop(nearestDatumKey, nearestDatum.datum),\n          _left = _getDatumLeftTop3.left,\n          _top = _getDatumLeftTop3.top;\n\n      glyphProps.push({\n        left: (_left != null ? _left : 0) - radius - strokeWidth,\n        top: (_top != null ? _top : 0) - radius - strokeWidth,\n        fill: (_ref7 = (_ref8 = (_ref9 = (_ref10 = nearestDatumKey && (colorScale == null ? void 0 : colorScale(nearestDatumKey))) != null ? _ref10 : null) != null ? _ref9 : theme == null ? void 0 : (_theme$gridStyles = theme.gridStyles) == null ? void 0 : _theme$gridStyles.stroke) != null ? _ref8 : theme == null ? void 0 : (_theme$htmlLabel2 = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel2.color) != null ? _ref7 : '#222',\n        radius: radius,\n        strokeWidth: strokeWidth\n      });\n    }\n  }\n\n  return (\n    /*#__PURE__*/\n    // Tooltip can be rendered as a child of SVG or HTML since its output is rendered in a Portal.\n    // So use svg element to find container ref because it's a valid child of SVG and HTML parents.\n    React.createElement(React.Fragment, null, /*#__PURE__*/React.createElement(\"svg\", {\n      ref: setContainerRef,\n      style: INVISIBLE_STYLES\n    }), showTooltip && /*#__PURE__*/React.createElement(React.Fragment, null, showVerticalCrosshair && /*#__PURE__*/React.createElement(TooltipInPortal, {\n      className: \"visx-crosshair visx-crosshair-vertical\",\n      left: tooltipLeft,\n      top: margin == null ? void 0 : margin.top,\n      offsetLeft: 0,\n      offsetTop: 0,\n      detectBounds: false,\n      style: TOOLTIP_NO_STYLE\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      width: \"1\",\n      height: innerHeight,\n      overflow: \"visible\"\n    }, /*#__PURE__*/React.createElement(\"line\", _extends({\n      x1: 0,\n      x2: 0,\n      y1: 0,\n      y2: innerHeight,\n      strokeWidth: 1.5,\n      stroke: (_ref11 = (_theme$gridStyles$str = theme == null ? void 0 : (_theme$gridStyles2 = theme.gridStyles) == null ? void 0 : _theme$gridStyles2.stroke) != null ? _theme$gridStyles$str : theme == null ? void 0 : (_theme$htmlLabel3 = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel3.color) != null ? _ref11 : '#222'\n    }, verticalCrosshairStyle)))), showHorizontalCrosshair && /*#__PURE__*/React.createElement(TooltipInPortal, {\n      className: \"visx-crosshair visx-crosshair-horizontal\",\n      left: margin == null ? void 0 : margin.left,\n      top: tooltipTop,\n      offsetLeft: 0,\n      offsetTop: 0,\n      detectBounds: false,\n      style: TOOLTIP_NO_STYLE\n    }, /*#__PURE__*/React.createElement(\"svg\", {\n      width: innerWidth,\n      height: \"1\",\n      overflow: \"visible\"\n    }, /*#__PURE__*/React.createElement(\"line\", _extends({\n      x1: 0,\n      x2: innerWidth,\n      y1: 0,\n      y2: 0,\n      strokeWidth: 1.5,\n      stroke: (_ref12 = (_theme$gridStyles$str2 = theme == null ? void 0 : (_theme$gridStyles3 = theme.gridStyles) == null ? void 0 : _theme$gridStyles3.stroke) != null ? _theme$gridStyles$str2 : theme == null ? void 0 : (_theme$htmlLabel4 = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel4.color) != null ? _ref12 : '#222'\n    }, horizontalCrosshairStyle)))), glyphProps.map(function (_ref13, i) {\n      var left = _ref13.left,\n          top = _ref13.top,\n          fill = _ref13.fill,\n          stroke = _ref13.stroke,\n          strokeWidth = _ref13.strokeWidth,\n          radius = _ref13.radius;\n      return top == null || left == null ? null : /*#__PURE__*/React.createElement(TooltipInPortal, {\n        key: i,\n        className: \"visx-tooltip-glyph\",\n        left: left,\n        top: top,\n        offsetLeft: 0,\n        offsetTop: 0,\n        detectBounds: false,\n        style: TOOLTIP_NO_STYLE\n      }, /*#__PURE__*/React.createElement(\"svg\", {\n        width: (radius + strokeWidth) * 2,\n        height: (radius + strokeWidth) * 2\n      }, /*#__PURE__*/React.createElement(\"circle\", _extends({\n        cx: radius + strokeWidth,\n        cy: radius + strokeWidth,\n        r: radius,\n        fill: fill,\n        stroke: stroke,\n        strokeWidth: strokeWidth,\n        paintOrder: \"fill\"\n      }, glyphStyle))));\n    }), /*#__PURE__*/React.createElement(TooltipInPortal, _extends({\n      left: tooltipLeft,\n      top: tooltipTop,\n      style: _extends({}, defaultStyles, {\n        background: (_theme$backgroundColo = theme == null ? void 0 : theme.backgroundColor) != null ? _theme$backgroundColo : 'white',\n        boxShadow: \"0 1px 2px \" + ((theme == null ? void 0 : (_theme$htmlLabel5 = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel5.color) ? (theme == null ? void 0 : (_theme$htmlLabel6 = theme.htmlLabel) == null ? void 0 : _theme$htmlLabel6.color) + \"55\" : '#22222255')\n      }, theme == null ? void 0 : theme.htmlLabel)\n    }, tooltipProps), tooltipContent)))\n  );\n}\nTooltip.propTypes = {\n  renderTooltip: _pt.func.isRequired,\n  snapTooltipToDatumX: _pt.bool,\n  snapTooltipToDatumY: _pt.bool,\n  showVerticalCrosshair: _pt.bool,\n  showHorizontalCrosshair: _pt.bool,\n  showDatumGlyph: _pt.bool,\n  showSeriesGlyphs: _pt.bool\n};"]},"metadata":{},"sourceType":"module"}