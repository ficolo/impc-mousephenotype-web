{"ast":null,"code":"import _pt from \"prop-types\";\n\nfunction _extends() {\n  _extends = Object.assign || function (target) {\n    for (var i = 1; i < arguments.length; i++) {\n      var source = arguments[i];\n\n      for (var key in source) {\n        if (Object.prototype.hasOwnProperty.call(source, key)) {\n          target[key] = source[key];\n        }\n      }\n    }\n\n    return target;\n  };\n\n  return _extends.apply(this, arguments);\n}\n\nimport React, { useContext, useMemo } from 'react';\nimport cx from 'classnames';\nimport Group from '@visx/group/lib/Group';\nimport Text from '@visx/text/lib/Text';\nimport useMeasure from 'react-use-measure';\nimport AnnotationContext from '../context/AnnotationContext';\nvar DEFAULT_PADDING = {\n  top: 12,\n  right: 12,\n  bottom: 12,\n  left: 12\n};\n\nfunction getCompletePadding(padding) {\n  if (typeof padding === 'undefined') return DEFAULT_PADDING;\n\n  if (typeof padding === 'number') {\n    return {\n      top: padding,\n      right: padding,\n      bottom: padding,\n      left: padding\n    };\n  }\n\n  return _extends({}, DEFAULT_PADDING, padding);\n}\n\nexport default function Label(_ref) {\n  var _titleBounds$height, _subtitleBounds$heigh, _titleBounds$height2;\n\n  var _ref$anchorLineStroke = _ref.anchorLineStroke,\n      anchorLineStroke = _ref$anchorLineStroke === void 0 ? '#222' : _ref$anchorLineStroke,\n      _ref$backgroundFill = _ref.backgroundFill,\n      backgroundFill = _ref$backgroundFill === void 0 ? '#eaeaea' : _ref$backgroundFill,\n      backgroundPadding = _ref.backgroundPadding,\n      backgroundProps = _ref.backgroundProps,\n      className = _ref.className,\n      _ref$fontColor = _ref.fontColor,\n      fontColor = _ref$fontColor === void 0 ? '#222' : _ref$fontColor,\n      propsHorizontalAnchor = _ref.horizontalAnchor,\n      resizeObserverPolyfill = _ref.resizeObserverPolyfill,\n      _ref$showAnchorLine = _ref.showAnchorLine,\n      showAnchorLine = _ref$showAnchorLine === void 0 ? true : _ref$showAnchorLine,\n      _ref$showBackground = _ref.showBackground,\n      showBackground = _ref$showBackground === void 0 ? true : _ref$showBackground,\n      subtitle = _ref.subtitle,\n      _ref$subtitleDy = _ref.subtitleDy,\n      subtitleDy = _ref$subtitleDy === void 0 ? 4 : _ref$subtitleDy,\n      _ref$subtitleFontSize = _ref.subtitleFontSize,\n      subtitleFontSize = _ref$subtitleFontSize === void 0 ? 12 : _ref$subtitleFontSize,\n      _ref$subtitleFontWeig = _ref.subtitleFontWeight,\n      subtitleFontWeight = _ref$subtitleFontWeig === void 0 ? 200 : _ref$subtitleFontWeig,\n      subtitleProps = _ref.subtitleProps,\n      title = _ref.title,\n      _ref$titleFontSize = _ref.titleFontSize,\n      titleFontSize = _ref$titleFontSize === void 0 ? 16 : _ref$titleFontSize,\n      _ref$titleFontWeight = _ref.titleFontWeight,\n      titleFontWeight = _ref$titleFontWeight === void 0 ? 600 : _ref$titleFontWeight,\n      titleProps = _ref.titleProps,\n      propsVerticalAnchor = _ref.verticalAnchor,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 125 : _ref$width,\n      propsX = _ref.x,\n      propsY = _ref.y; // we must measure the rendered title + subtitle to compute container height\n\n  var _useMeasure = useMeasure({\n    polyfill: resizeObserverPolyfill\n  }),\n      titleRef = _useMeasure[0],\n      titleBounds = _useMeasure[1];\n\n  var _useMeasure2 = useMeasure({\n    polyfill: resizeObserverPolyfill\n  }),\n      subtitleRef = _useMeasure2[0],\n      subtitleBounds = _useMeasure2[1];\n\n  var padding = useMemo(function () {\n    return getCompletePadding(backgroundPadding);\n  }, [backgroundPadding]); // if props are provided, they take precedence over context\n\n  var _useContext = useContext(AnnotationContext),\n      _useContext$x = _useContext.x,\n      x = _useContext$x === void 0 ? 0 : _useContext$x,\n      _useContext$y = _useContext.y,\n      y = _useContext$y === void 0 ? 0 : _useContext$y,\n      _useContext$dx = _useContext.dx,\n      dx = _useContext$dx === void 0 ? 0 : _useContext$dx,\n      _useContext$dy = _useContext.dy,\n      dy = _useContext$dy === void 0 ? 0 : _useContext$dy;\n\n  var height = Math.floor(padding.top + padding.bottom + ((_titleBounds$height = titleBounds.height) != null ? _titleBounds$height : 0) + ((_subtitleBounds$heigh = subtitleBounds.height) != null ? _subtitleBounds$heigh : 0));\n  var innerWidth = width - padding.left - padding.right; // offset container position based on horizontal + vertical anchor\n\n  var horizontalAnchor = propsHorizontalAnchor || (Math.abs(dx) < Math.abs(dy) ? 'middle' : dx > 0 ? 'start' : 'end');\n  var verticalAnchor = propsVerticalAnchor || (Math.abs(dx) > Math.abs(dy) ? 'middle' : dy > 0 ? 'start' : 'end');\n  var containerCoords = useMemo(function () {\n    var adjustedX = propsX == null ? x + dx : propsX;\n    var adjustedY = propsY == null ? y + dy : propsY;\n    if (horizontalAnchor === 'middle') adjustedX -= width / 2;\n    if (horizontalAnchor === 'end') adjustedX -= width;\n    if (verticalAnchor === 'middle') adjustedY -= height / 2;\n    if (verticalAnchor === 'end') adjustedY -= height;\n    return {\n      x: adjustedX,\n      y: adjustedY\n    };\n  }, [propsX, x, dx, propsY, y, dy, horizontalAnchor, verticalAnchor, width, height]);\n  var titleFontFamily = titleProps == null ? void 0 : titleProps.fontFamily;\n  var titleStyle = useMemo(function () {\n    return {\n      fontSize: titleFontSize,\n      fontWeight: titleFontWeight,\n      fontFamily: titleFontFamily\n    };\n  }, [titleFontSize, titleFontWeight, titleFontFamily]);\n  var subtitleFontFamily = subtitleProps == null ? void 0 : subtitleProps.fontFamily;\n  var subtitleStyle = useMemo(function () {\n    return {\n      fontSize: subtitleFontSize,\n      fontWeight: subtitleFontWeight,\n      fontFamily: subtitleFontFamily\n    };\n  }, [subtitleFontSize, subtitleFontWeight, subtitleFontFamily]);\n  var anchorLineOrientation = Math.abs(dx) > Math.abs(dy) ? 'vertical' : 'horizontal';\n  var backgroundOutline = showAnchorLine ? {\n    stroke: anchorLineStroke,\n    strokeWidth: 2\n  } : null;\n  return !title && !subtitle ? null : /*#__PURE__*/React.createElement(Group, {\n    top: containerCoords.y,\n    left: containerCoords.x,\n    pointerEvents: \"none\",\n    className: cx('visx-annotationlabel', className),\n    opacity: titleBounds.height === 0 && subtitleBounds.height === 0 ? 0 : 1\n  }, showBackground && /*#__PURE__*/React.createElement(\"rect\", _extends({\n    className: \"visx-annotationlabel-background\",\n    fill: backgroundFill,\n    x: 0,\n    y: 0,\n    width: width,\n    height: height\n  }, backgroundProps)), showAnchorLine && /*#__PURE__*/React.createElement(React.Fragment, null, anchorLineOrientation === 'horizontal' && verticalAnchor === 'start' && /*#__PURE__*/React.createElement(\"line\", _extends({}, backgroundOutline, {\n    x1: 0,\n    x2: width,\n    y1: 0,\n    y2: 0\n  })), anchorLineOrientation === 'horizontal' && verticalAnchor === 'end' && /*#__PURE__*/React.createElement(\"line\", _extends({}, backgroundOutline, {\n    x1: 0,\n    x2: width,\n    y1: height,\n    y2: height\n  })), anchorLineOrientation === 'vertical' && horizontalAnchor === 'start' && /*#__PURE__*/React.createElement(\"line\", _extends({}, backgroundOutline, {\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: height\n  })), anchorLineOrientation === 'vertical' && horizontalAnchor === 'end' && /*#__PURE__*/React.createElement(\"line\", _extends({}, backgroundOutline, {\n    x1: width,\n    x2: width,\n    y1: 0,\n    y2: height\n  }))), title && /*#__PURE__*/React.createElement(Text, _extends({\n    innerRef: titleRef,\n    fill: fontColor,\n    verticalAnchor: \"start\",\n    x: padding.left + ((titleProps == null ? void 0 : titleProps.textAnchor) === 'middle' ? innerWidth / 2 : 0),\n    y: padding.top,\n    width: innerWidth,\n    capHeight: titleFontSize // capHeight should match fontSize, used for first line line height\n    ,\n    style: titleStyle // used for size calculation\n\n  }, titleProps), title), subtitle && /*#__PURE__*/React.createElement(Text, _extends({\n    innerRef: subtitleRef,\n    fill: fontColor,\n    verticalAnchor: \"start\",\n    x: padding.left + ((subtitleProps == null ? void 0 : subtitleProps.textAnchor) === 'middle' ? innerWidth / 2 : 0),\n    y: padding.top + ((_titleBounds$height2 = titleBounds.height) != null ? _titleBounds$height2 : 0),\n    dy: title ? subtitleDy : 0,\n    width: innerWidth,\n    capHeight: subtitleFontSize // capHeight should match fontSize, used for first line line height\n    ,\n    style: subtitleStyle // used for size calculation\n\n  }, subtitleProps), subtitle));\n}\nLabel.propTypes = {\n  anchorLineStroke: _pt.string,\n  backgroundFill: _pt.string,\n  backgroundPadding: _pt.oneOfType([_pt.number, _pt.shape({\n    top: _pt.number,\n    right: _pt.number,\n    bottom: _pt.number,\n    left: _pt.number\n  })]),\n  className: _pt.string,\n  fontColor: _pt.string,\n  showAnchorLine: _pt.bool,\n  showBackground: _pt.bool,\n  subtitle: _pt.string,\n  subtitleDy: _pt.number,\n  title: _pt.string,\n  width: _pt.number,\n  x: _pt.number,\n  y: _pt.number\n};","map":{"version":3,"sources":["/Users/federico/git/test/impc-mousephenotype-web/node_modules/@visx/annotation/esm/components/Label.js"],"names":["_pt","_extends","Object","assign","target","i","arguments","length","source","key","prototype","hasOwnProperty","call","apply","React","useContext","useMemo","cx","Group","Text","useMeasure","AnnotationContext","DEFAULT_PADDING","top","right","bottom","left","getCompletePadding","padding","Label","_ref","_titleBounds$height","_subtitleBounds$heigh","_titleBounds$height2","_ref$anchorLineStroke","anchorLineStroke","_ref$backgroundFill","backgroundFill","backgroundPadding","backgroundProps","className","_ref$fontColor","fontColor","propsHorizontalAnchor","horizontalAnchor","resizeObserverPolyfill","_ref$showAnchorLine","showAnchorLine","_ref$showBackground","showBackground","subtitle","_ref$subtitleDy","subtitleDy","_ref$subtitleFontSize","subtitleFontSize","_ref$subtitleFontWeig","subtitleFontWeight","subtitleProps","title","_ref$titleFontSize","titleFontSize","_ref$titleFontWeight","titleFontWeight","titleProps","propsVerticalAnchor","verticalAnchor","_ref$width","width","propsX","x","propsY","y","_useMeasure","polyfill","titleRef","titleBounds","_useMeasure2","subtitleRef","subtitleBounds","_useContext","_useContext$x","_useContext$y","_useContext$dx","dx","_useContext$dy","dy","height","Math","floor","innerWidth","abs","containerCoords","adjustedX","adjustedY","titleFontFamily","fontFamily","titleStyle","fontSize","fontWeight","subtitleFontFamily","subtitleStyle","anchorLineOrientation","backgroundOutline","stroke","strokeWidth","createElement","pointerEvents","opacity","fill","Fragment","x1","x2","y1","y2","innerRef","textAnchor","capHeight","style","propTypes","string","oneOfType","number","shape","bool"],"mappings":"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","sourcesContent":["import _pt from \"prop-types\";\n\nfunction _extends() { _extends = Object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (Object.prototype.hasOwnProperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); }\n\nimport React, { useContext, useMemo } from 'react';\nimport cx from 'classnames';\nimport Group from '@visx/group/lib/Group';\nimport Text from '@visx/text/lib/Text';\nimport useMeasure from 'react-use-measure';\nimport AnnotationContext from '../context/AnnotationContext';\nvar DEFAULT_PADDING = {\n  top: 12,\n  right: 12,\n  bottom: 12,\n  left: 12\n};\n\nfunction getCompletePadding(padding) {\n  if (typeof padding === 'undefined') return DEFAULT_PADDING;\n\n  if (typeof padding === 'number') {\n    return {\n      top: padding,\n      right: padding,\n      bottom: padding,\n      left: padding\n    };\n  }\n\n  return _extends({}, DEFAULT_PADDING, padding);\n}\n\nexport default function Label(_ref) {\n  var _titleBounds$height, _subtitleBounds$heigh, _titleBounds$height2;\n\n  var _ref$anchorLineStroke = _ref.anchorLineStroke,\n      anchorLineStroke = _ref$anchorLineStroke === void 0 ? '#222' : _ref$anchorLineStroke,\n      _ref$backgroundFill = _ref.backgroundFill,\n      backgroundFill = _ref$backgroundFill === void 0 ? '#eaeaea' : _ref$backgroundFill,\n      backgroundPadding = _ref.backgroundPadding,\n      backgroundProps = _ref.backgroundProps,\n      className = _ref.className,\n      _ref$fontColor = _ref.fontColor,\n      fontColor = _ref$fontColor === void 0 ? '#222' : _ref$fontColor,\n      propsHorizontalAnchor = _ref.horizontalAnchor,\n      resizeObserverPolyfill = _ref.resizeObserverPolyfill,\n      _ref$showAnchorLine = _ref.showAnchorLine,\n      showAnchorLine = _ref$showAnchorLine === void 0 ? true : _ref$showAnchorLine,\n      _ref$showBackground = _ref.showBackground,\n      showBackground = _ref$showBackground === void 0 ? true : _ref$showBackground,\n      subtitle = _ref.subtitle,\n      _ref$subtitleDy = _ref.subtitleDy,\n      subtitleDy = _ref$subtitleDy === void 0 ? 4 : _ref$subtitleDy,\n      _ref$subtitleFontSize = _ref.subtitleFontSize,\n      subtitleFontSize = _ref$subtitleFontSize === void 0 ? 12 : _ref$subtitleFontSize,\n      _ref$subtitleFontWeig = _ref.subtitleFontWeight,\n      subtitleFontWeight = _ref$subtitleFontWeig === void 0 ? 200 : _ref$subtitleFontWeig,\n      subtitleProps = _ref.subtitleProps,\n      title = _ref.title,\n      _ref$titleFontSize = _ref.titleFontSize,\n      titleFontSize = _ref$titleFontSize === void 0 ? 16 : _ref$titleFontSize,\n      _ref$titleFontWeight = _ref.titleFontWeight,\n      titleFontWeight = _ref$titleFontWeight === void 0 ? 600 : _ref$titleFontWeight,\n      titleProps = _ref.titleProps,\n      propsVerticalAnchor = _ref.verticalAnchor,\n      _ref$width = _ref.width,\n      width = _ref$width === void 0 ? 125 : _ref$width,\n      propsX = _ref.x,\n      propsY = _ref.y;\n\n  // we must measure the rendered title + subtitle to compute container height\n  var _useMeasure = useMeasure({\n    polyfill: resizeObserverPolyfill\n  }),\n      titleRef = _useMeasure[0],\n      titleBounds = _useMeasure[1];\n\n  var _useMeasure2 = useMeasure({\n    polyfill: resizeObserverPolyfill\n  }),\n      subtitleRef = _useMeasure2[0],\n      subtitleBounds = _useMeasure2[1];\n\n  var padding = useMemo(function () {\n    return getCompletePadding(backgroundPadding);\n  }, [backgroundPadding]); // if props are provided, they take precedence over context\n\n  var _useContext = useContext(AnnotationContext),\n      _useContext$x = _useContext.x,\n      x = _useContext$x === void 0 ? 0 : _useContext$x,\n      _useContext$y = _useContext.y,\n      y = _useContext$y === void 0 ? 0 : _useContext$y,\n      _useContext$dx = _useContext.dx,\n      dx = _useContext$dx === void 0 ? 0 : _useContext$dx,\n      _useContext$dy = _useContext.dy,\n      dy = _useContext$dy === void 0 ? 0 : _useContext$dy;\n\n  var height = Math.floor(padding.top + padding.bottom + ((_titleBounds$height = titleBounds.height) != null ? _titleBounds$height : 0) + ((_subtitleBounds$heigh = subtitleBounds.height) != null ? _subtitleBounds$heigh : 0));\n  var innerWidth = width - padding.left - padding.right; // offset container position based on horizontal + vertical anchor\n\n  var horizontalAnchor = propsHorizontalAnchor || (Math.abs(dx) < Math.abs(dy) ? 'middle' : dx > 0 ? 'start' : 'end');\n  var verticalAnchor = propsVerticalAnchor || (Math.abs(dx) > Math.abs(dy) ? 'middle' : dy > 0 ? 'start' : 'end');\n  var containerCoords = useMemo(function () {\n    var adjustedX = propsX == null ? x + dx : propsX;\n    var adjustedY = propsY == null ? y + dy : propsY;\n    if (horizontalAnchor === 'middle') adjustedX -= width / 2;\n    if (horizontalAnchor === 'end') adjustedX -= width;\n    if (verticalAnchor === 'middle') adjustedY -= height / 2;\n    if (verticalAnchor === 'end') adjustedY -= height;\n    return {\n      x: adjustedX,\n      y: adjustedY\n    };\n  }, [propsX, x, dx, propsY, y, dy, horizontalAnchor, verticalAnchor, width, height]);\n  var titleFontFamily = titleProps == null ? void 0 : titleProps.fontFamily;\n  var titleStyle = useMemo(function () {\n    return {\n      fontSize: titleFontSize,\n      fontWeight: titleFontWeight,\n      fontFamily: titleFontFamily\n    };\n  }, [titleFontSize, titleFontWeight, titleFontFamily]);\n  var subtitleFontFamily = subtitleProps == null ? void 0 : subtitleProps.fontFamily;\n  var subtitleStyle = useMemo(function () {\n    return {\n      fontSize: subtitleFontSize,\n      fontWeight: subtitleFontWeight,\n      fontFamily: subtitleFontFamily\n    };\n  }, [subtitleFontSize, subtitleFontWeight, subtitleFontFamily]);\n  var anchorLineOrientation = Math.abs(dx) > Math.abs(dy) ? 'vertical' : 'horizontal';\n  var backgroundOutline = showAnchorLine ? {\n    stroke: anchorLineStroke,\n    strokeWidth: 2\n  } : null;\n  return !title && !subtitle ? null : /*#__PURE__*/React.createElement(Group, {\n    top: containerCoords.y,\n    left: containerCoords.x,\n    pointerEvents: \"none\",\n    className: cx('visx-annotationlabel', className),\n    opacity: titleBounds.height === 0 && subtitleBounds.height === 0 ? 0 : 1\n  }, showBackground && /*#__PURE__*/React.createElement(\"rect\", _extends({\n    className: \"visx-annotationlabel-background\",\n    fill: backgroundFill,\n    x: 0,\n    y: 0,\n    width: width,\n    height: height\n  }, backgroundProps)), showAnchorLine && /*#__PURE__*/React.createElement(React.Fragment, null, anchorLineOrientation === 'horizontal' && verticalAnchor === 'start' && /*#__PURE__*/React.createElement(\"line\", _extends({}, backgroundOutline, {\n    x1: 0,\n    x2: width,\n    y1: 0,\n    y2: 0\n  })), anchorLineOrientation === 'horizontal' && verticalAnchor === 'end' && /*#__PURE__*/React.createElement(\"line\", _extends({}, backgroundOutline, {\n    x1: 0,\n    x2: width,\n    y1: height,\n    y2: height\n  })), anchorLineOrientation === 'vertical' && horizontalAnchor === 'start' && /*#__PURE__*/React.createElement(\"line\", _extends({}, backgroundOutline, {\n    x1: 0,\n    x2: 0,\n    y1: 0,\n    y2: height\n  })), anchorLineOrientation === 'vertical' && horizontalAnchor === 'end' && /*#__PURE__*/React.createElement(\"line\", _extends({}, backgroundOutline, {\n    x1: width,\n    x2: width,\n    y1: 0,\n    y2: height\n  }))), title && /*#__PURE__*/React.createElement(Text, _extends({\n    innerRef: titleRef,\n    fill: fontColor,\n    verticalAnchor: \"start\",\n    x: padding.left + ((titleProps == null ? void 0 : titleProps.textAnchor) === 'middle' ? innerWidth / 2 : 0),\n    y: padding.top,\n    width: innerWidth,\n    capHeight: titleFontSize // capHeight should match fontSize, used for first line line height\n    ,\n    style: titleStyle // used for size calculation\n\n  }, titleProps), title), subtitle && /*#__PURE__*/React.createElement(Text, _extends({\n    innerRef: subtitleRef,\n    fill: fontColor,\n    verticalAnchor: \"start\",\n    x: padding.left + ((subtitleProps == null ? void 0 : subtitleProps.textAnchor) === 'middle' ? innerWidth / 2 : 0),\n    y: padding.top + ((_titleBounds$height2 = titleBounds.height) != null ? _titleBounds$height2 : 0),\n    dy: title ? subtitleDy : 0,\n    width: innerWidth,\n    capHeight: subtitleFontSize // capHeight should match fontSize, used for first line line height\n    ,\n    style: subtitleStyle // used for size calculation\n\n  }, subtitleProps), subtitle));\n}\nLabel.propTypes = {\n  anchorLineStroke: _pt.string,\n  backgroundFill: _pt.string,\n  backgroundPadding: _pt.oneOfType([_pt.number, _pt.shape({\n    top: _pt.number,\n    right: _pt.number,\n    bottom: _pt.number,\n    left: _pt.number\n  })]),\n  className: _pt.string,\n  fontColor: _pt.string,\n  showAnchorLine: _pt.bool,\n  showBackground: _pt.bool,\n  subtitle: _pt.string,\n  subtitleDy: _pt.number,\n  title: _pt.string,\n  width: _pt.number,\n  x: _pt.number,\n  y: _pt.number\n};"]},"metadata":{},"sourceType":"module"}